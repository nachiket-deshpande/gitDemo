<apex:page docType="html-5.0" showHeader="false" sidebar="false"
    standardController="User" extensions="Profile_Personal_V1Clone"
    standardStylesheets="false" action="{!QueryPage1}" id="PageID">
    <!--<apex:outputText value="{!subTabHTML}" escape="false" />-->
    <apex:stylesheet value="{!$Resource.acfCommStyles}"/>
    <style>
.empty-column-content {
    display: none;
}
.ContentColor{
    color: black;
    padding-top: 10px;
}
.profile_page_wrapper .colSpan1 {
    width: 23%;
    float: left;
}

.profile_page_wrapper .colSpan2 {
    width: 48%;
    float: left;
}

.profile_page_wrapper .colSpan3 {
    width: 73%;
    float: left;
}

.profile_page_wrapper .colSpan4 {
    width: 100%;
    float: left;
}
.profile_page_margin{
    margin-left:5%;
}
.mobilebackgroundset
{
    background: #8a8f92 !important;
    border: 1px solid #b0b5b9 !important;
    padding: 10px !important;
    border-radius: 3px !important;
    border-width: 1px 1px 8px !important;
}
.backgroundColor2Column
{
    background: #8a8f92;
    padding: 10px;
    border-radius: 3px;
    margin: 3px 0;
    min-height: 14px;
}
.Edit2Column{
    background: #fff;
    padding: 7px 10px;
    min-height: 20px;
}
</style>

<apex:form id="frmSubsection">
     <div class="ContentColor"><apex:outputField value="{!communityWebContent.Page_Content__c}" rendered="{!showEditBtn}"/></div>
    <apex:actionFunction name="setMobile" action="{!setMobileMode}" reRender="frmSubsection" />
    <apex:actionFunction name="setDesktop" action="{!setDesktopMode}" reRender="frmSubsection"/ >
    <apex:pageMessages />
<!--     <apex:actionFunction name="updateUserRecord" action="{!testMethodNew}" oncomplete="alert('{!relatedFullId}');" rerender="frmSubsection"/> -->
    <apex:actionFunction name="refreshDiv"
            reRender="pageBody, editPanel, editPanel2" />
        <div class="profile_page_wrapper">
            <apex:outputPanel id="upperButtonPanel">
                <div class="profile_buttons">
                    <apex:outPutPanel id="editPanel" rendered="{!showEditBtn}">
                        <apex:commandButton id="cbEdit" value="Edit"
                            rerender="pageBody, editPanel, editPanel2, lowerButtonPanel,
                                      upperButtonPanel"
                            action="{!EditSobjectRecord}" rendered="{!!isEditMode}" immediate="true"/>
                        <apex:commandButton id="cbSave" value="Save"
                            rerender="pageBody, editPanel, editPanel2, lowerButtonPanel,
                                      upperButtonPanel"
                            action="{!saveSobjectRecord}" rendered="{!isEditMode}" />
                        <apex:commandButton id="cbCancel" value="Cancel"
                            reRender="pageBody, editPanel, editPanel2, lowerButtonPanel,
                                      upperButtonPanel"
                            action="{!cancel}" rendered="{!isEditMode}" />
                    </apex:outPutPanel>
                </div>
            </apex:outputPanel>


            <apex:outputpanel id="pageBody">
                <apex:repeat value="{!subSectionCustomSettings}" var="pageSection">
                    <apex:pageBlock title="">
                        <div class="profile_section" style="margin-bottom: 15px;">
                            <div class="profile_header">
                                {!pageSection['acfComm__Title__c']}
                                <!--<apex:outputPanel rendered="{!!isEditMode &&
                                pageSection['acfComm__Privacy_Field_API__c']!=null}">
                            <div class="profile_private"><apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][pageSection['acfComm__Privacy_Field_API__c']]}" /> Private</div>
                        </apex:outputPanel>-->
                                <apex:outputPanel rendered="{!isEditMode && pageSection['acfComm__Privacy_Field_API__c']!=null}">
                                    <div class="profile_private">
                                        <apex:inputField value="{!currentContact[pageSection['acfComm__Privacy_Field_API__c']]}" />
                                        Private
                                    </div>
                                </apex:outputPanel>
                            </div>
                            <div class="profile_helpText">{!pageSection['acfComm__Help_Text__c']}</div>
                            <div class="profile_data">
                                <!-- subsection -->
                                <apex:outputPanel rendered="{!pageSection['acfComm__Custom_Setting_Type__c']=='subsection'}">
                                    <!--<apex:repeat value="{!lstSubsectionCustomSetting}" var="subSectionObj">-->
                                    <apex:pageblockSection >
<!--                                         <apex:outputfield value="{!mapWebContent['!SUBSECTION_PUBLIC_PROFILE'].Page_Content__c}" label=""/> -->
                                    </apex:pageblockSection>
                                    <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                        var="subSectionObj">
                                        <div class="profile_section">
                                            <div class="profile_header">
                                                {!subSectionObj['acfComm__Title__c']}
                                                <!--<apex:outputPanel rendered="{!!isEditMode && subSectionObj['acfComm__Privacy_Field_API__c']!=null}">
                                            <div class="profile_private"><apex:outputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][subSectionObj['acfComm__Privacy_Field_API__c']]}" /> Private</div>
                                        </apex:outputPanel>-->
                                                <apex:outputPanel rendered="{!isEditMode && subSectionObj['acfComm__Privacy_Field_API__c']!=null}">
                                                    <div class="profile_private">
                                                        <apex:inputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][subSectionObj['acfComm__Privacy_Field_API__c']]}" />
                                                        Private
                                                    </div>
                                                </apex:outputPanel>
                                            </div>
                                            <div class="profile_helpText">{!subSectionObj['acfComm__Help_Text__c']}</div>
                                            <div class="profile_data">
                                                <apex:outputPanel rendered="{!subSectionObj['acfComm__Custom_Setting_Type__c']=='2 column'}">
                                                    <apex:outputPanel rendered="{!pageSection['acfComm__Privacy_Field_API__c']==null || (pageSection['acfComm__Privacy_Field_API__c']!=null && sectionIdToObjMap[pageSection['Id']][0][pageSection['acfComm__Privacy_Field_API__c']]==false)}">
                                                        <apex:outputPanel rendered="{!subSectionObj['acfComm__Privacy_Field_API__c']==null || (subSectionObj['acfComm__Privacy_Field_API__c']==null!=null && sectionIdToObjMap[subSectionObj['Id']][0][subSectionObj['acfComm__Privacy_Field_API__c']]==false)}">
                                                            <apex:outputPanel rendered="{!!isEditMode}">
                                                                <apex:repeat value="{!sectionIdToFieldsMap[subSectionObj['Id']]}"
                                                                    var="objField">

                                                             <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                                        1" || objField.acfComm__Column_Span__c==''}">
                                                                        <div class="ps_fields colSpan1">
                                                                            <div class="ps_label">
                                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                            </div>
                                                                            <div class="ps_data">
                                                                                <apex:outputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                                    rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                                            </div>
                                                                        </div>
                                                                    </apex:outputpanel>
                                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                                        <div class="ps_fields colSpan2">
                                                                            <div class="ps_label">
                                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                            </div>
                                                                            <div class="ps_data">
                                                                                <apex:outputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                                    rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                                            </div>
                                                                        </div>
                                                                    </apex:outputpanel>
                                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                                        <div class="ps_fields colSpan3">
                                                                            <div class="ps_label">
                                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                            </div>
                                                                            <div class="ps_data">
                                                                                <apex:outputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                                    rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                                            </div>
                                                                        </div>
                                                                    </apex:outputpanel>
                                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                                        <div class="ps_fields colSpan4">
                                                                            <div class="ps_label">
                                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                            </div>
                                                                            <div class="ps_data">
                                                                                <apex:outputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                                    rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                                            </div>
                                                                        </div>
                                                                    </apex:outputpanel>
                                                                </apex:repeat>
                                                                <div class="clr">&nbsp;</div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{!isEditMode}">
                                                        <apex:repeat value="{!sectionIdToFieldsMap[subSectionObj['Id']]}"
                                                            var="objField">

                                                            <apex:outputPanel rendered="{!!objField.Read_Only__c}">
                                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                                    1" || objField.acfComm__Column_Span__c==''}">
                                                                    <div class="ps_fields colSpan1">
                                                                        <div class="ps_label">

                                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                        </div>
                                                                        <div class="ps_data ps_edit">
                                                                            <apex:inputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                                        </div>
                                                                        <div class="ps_private">
                                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                                <apex:inputfield value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private
                                                                            </apex:outputPanel> 
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                                    <div class="ps_fields colSpan2">
                                                                        <div class="ps_label">

                                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                        </div>
                                                                        <div class="ps_data ps_edit">
                                                                            <apex:inputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                                        </div>
                                                                        <div class="ps_private">
                                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                                <apex:inputfield value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private
                                                                                </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                                    <div class="ps_fields colSpan3">
                                                                        <div class="ps_label">

                                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                        </div>
                                                                        <div class="ps_data ps_edit">
                                                                            <apex:inputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                                        </div>
                                                                        <div class="ps_private">
                                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                                <apex:inputfield value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private
                                                                                </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                                    <div class="ps_fields colSpan4">
                                                                        <div class="ps_label">

                                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                        </div>
                                                                        <div class="ps_data ps_edit">
                                                                            <apex:inputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                                        </div>
                                                                        <div class="ps_private">
                                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                                <apex:inputfield value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private
                                                                                </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!objField.Read_Only__c}">
                                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                                    1" || objField.acfComm__Column_Span__c==''}">
                                                                    <div class="ps_fields colSpan1">
                                                                        <div class="ps_label">
                                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                        </div>
                                                                        <div class="ps_data">
                                                                            <apex:outputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                                        </div>
                                                                        <div class="ps_private">
                                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                                <apex:inputfield value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private
                                                                                </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                                    <div class="ps_fields colSpan2">
                                                                        <div class="ps_label">
                                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                        </div>
                                                                        <div class="ps_data">
                                                                            <apex:outputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                                        </div>
                                                                        <div class="ps_private">
                                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                                <apex:inputfield value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private
                                                                                </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                                    <div class="ps_fields colSpan3">
                                                                        <div class="ps_label">
                                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                        </div>
                                                                        <div class="ps_data">
                                                                            <apex:outputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                                        </div>
                                                                        <div class="ps_private">
                                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                                <apex:inputfield value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private
                                                                                </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                                    <div class="ps_fields colSpan4">
                                                                        <div class="ps_label">
                                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                        </div>
                                                                        <div class="ps_data">
                                                                            <apex:outputField value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                                        </div>
                                                                        <div class="ps_private">
                                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                                <apex:inputfield value="{!sectionIdToObjMap[subSectionObj['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private
                                                                                </apex:outputPanel>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputpanel>
                                                            </apex:outputPanel>
                                                        </apex:repeat>
                                                        <div class="clr">&nbsp;</div>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>

                                                <!-- preferences -->
                                <apex:outputPanel rendered="{!pageSection['acfComm__Custom_Setting_Type__c']=='preferences'}">
                                    <apex:pageblockSection >
<!--                                         <apex:outputfield value="{!mapWebContent['Two Column public Profile'].Page_Content__c}" /> -->
                                    </apex:pageblockSection>
                                    <apex:outputPanel rendered="{!pageSection['acfComm__Privacy_Field_API__c']==null || (pageSection['acfComm__Privacy_Field_API__c']!=null && sectionIdToObjMap[pageSection['Id']][0][pageSection['acfComm__Privacy_Field_API__c']]==false)}">
                                        <apex:outputPanel rendered="{!!isEditMode}">

                                            <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                var="objField">
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                    1" || objField.acfComm__Column_Span__c==''}">
                                                    <div class="ps_fieldsPref colSpan1">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                    <div class="ps_fieldsPref colSpan2">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                    <div class="ps_fieldsPref colSpan3">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                    <div class="ps_fieldsPref colSpan4">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>

                                            </apex:repeat>

                                            <div class="clr">&nbsp;</div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!isEditMode}">
                                        <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                            var="objField">
                                            <apex:outputPanel rendered="{!!objField.Read_Only__c}">
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                    1" || objField.acfComm__Column_Span__c==''}">
                                                    <div class="ps_fieldsPref colSpan1">
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                    <div class="ps_fieldsPref colSpan2">
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                    <div class="ps_fieldsPref colSpan3">
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                    <div class="ps_fieldsPref colSpan4">
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>

                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!objField.Read_Only__c}">
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                    1" || objField.acfComm__Column_Span__c==''}">
                                                    <div class="ps_fieldsPref colSpan1">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                    <div class="ps_fieldsPref colSpan2">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                    <div class="ps_fieldsPref colSpan3">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                    <div class="ps_fieldsPref colSpan4">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                            </apex:outputPanel>
                                        </apex:repeat>
                                        <div class="clr">&nbsp;</div>
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                                <!-- related list compact -->
                                                <apex:outputPanel rendered="{!subSectionObj['acfComm__Custom_Setting_Type__c']=='related list compact'}">
                                                    related list compact
                                                    <apex:pageblockSection >
<!--                                                         <apex:outputfield value="{!mapWebContent['Related List Compact Public Profile'].Page_Content__c}" label=""/> -->
                                                    </apex:pageblockSection>
                                                    <apex:outputPanel rendered="{!!isEditMode}">
                                                        <apex:outputPanel rendered="{!subSectionObj['acfComm__Privacy_Field_API__c']==null || (subSectionObj['acfComm__Privacy_Field_API__c']!=null && currentContact[pageSection['acfComm__Privacy_Field_API__c']]==false)}">
                                                            <apex:pageBlockTable value="{!sectionIdToObjMap[subSectionObj['Id']]}"
                                                                var="pbtObj">
                                                                <apex:repeat value="{!sectionIdToFieldsMap[subSectionObj['Id']]}"
                                                                    var="objField">
                                                                    <apex:column value="{!pbtObj[objField.acfComm__Field_API_Name__c]}">
                                                                        <apex:facet name="header">{!objField.acfComm__Field_Name__c}</apex:facet>

                                                                    </apex:column>
                                                                </apex:repeat>
                                                            </apex:pageBlockTable>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{!isEditMode}">
                                                        <apex:pageBlockTable value="{!sectionIdToObjMap[subSectionObj['Id']]}"
                                                            var="pbtObj">
                                                            <apex:column >
                                                                <apex:commandLink value="Delete"
                                                                    action="{!deleteRelatedList}"
                                                                    rendered="{!subSectionObj['acfComm__Related_List_Read_Only_API__c']==null || (subSectionObj['acfComm__Related_List_Read_Only_API__c']!=null && pbtObj[subSectionObj['acfComm__Related_List_Read_Only_API__c']]==false)}">
                                                                    <apex:param name="realtedListObjId"
                                                                        value="{!pbtObj['Id']}" assignTo="{!realtedListObjId}" />
                                                                </apex:commandLink>
                                                                <apex:facet name="footer">
                                                                    <apex:commandLink value="Add"
                                                                        action="{!saveSobjectRecordToList}"
                                                                        styleClass="ps_add">
                                                                        <apex:param name="pageSectionId"
                                                                            value="{!subSectionObj['Id']}"
                                                                            assignTo="{!pageSectionId}" />
                                                                    </apex:commandLink>
                                                                </apex:facet>
                                                            </apex:column>
                                                            <apex:column value="{!pbtObj[subSectionObj['acfComm__Related_List_Privacy_API__c']]}"
                                                                rendered="{!subSectionObj['acfComm__Related_List_Privacy_API__c']!=null}">
                                                                <apex:facet name="header">Private</apex:facet>
                                                                <apex:facet name="footer">
                                                                    <apex:inputField value="{!sectionIdToRelatedListObjectMap[subSectionObj['Id']][subSectionObj['acfComm__Related_List_Privacy_API__c']]}" />
                                                                </apex:facet>
                                                            </apex:column>
                                                            <apex:repeat value="{!sectionIdToFieldsMap[subSectionObj['Id']]}"
                                                                var="objField">
                                                                <apex:column value="{!pbtObj[objField.acfComm__Field_API_Name__c]}">
                                                                    <apex:facet name="header">{!objField.acfComm__Field_Name__c}</apex:facet>
                                                                    <apex:facet name="footer">
                                                                        <apex:inputField value="{!sectionIdToRelatedListObjectMap[subSectionObj['Id']][objField.acfComm__Field_API_Name__c]}" />
                                                                    </apex:facet>
                                                                </apex:column>
                                                            </apex:repeat>
                                                        </apex:pageBlockTable>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>

                                                <!-- related list full -->
                                                <apex:outputPanel rendered="{!subSectionObj['acfComm__Custom_Setting_Type__c']=='related list full'}">
                                                    <apex:pageblockSection >
<!--                                                         <apex:outputfield value="{!mapWebContent['Related list Full Public Profile'].Page_Content__c}" label=""/> -->
                                                    </apex:pageblockSection>
                                                    <apex:outputPanel rendered="{!!isEditMode}">
                                                        <apex:outputPanel rendered="{!pageSection['acfComm__Privacy_Field_API__c']==null || (pageSection['acfComm__Privacy_Field_API__c']!=null && currentContact[pageSection['acfComm__Privacy_Field_API__c']]==false)}">
                                                            <apex:pageBlockTable value="{!sectionIdToObjMap[subSectionObj['Id']]}"
                                                                var="pbtObj">
                                                                <apex:repeat value="{!sectionIdToFieldsMap[subSectionObj['Id']]}"
                                                                    var="objField">
                                                                    <apex:column value="{!pbtObj[objField.acfComm__Field_API_Name__c]}"
                                                                        rendered="{!objField.acfComm__Read_Mode__c==true}">
                                                                        <apex:facet name="header">{!objField.acfComm__Field_Name__c}</apex:facet>
                                                                    </apex:column>
                                                                </apex:repeat>
                                                            </apex:pageBlockTable>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{!isEditMode}">
                                                        <!--<apex:variable var="obj3" value="{!sectionIdToObjMap[pageSection['Id']][0]}" />-->
                                                        <apex:pageBlockTable value="{!sectionIdToObjMap[subSectionObj['Id']]}"
                                                            var="pbtObj">
                                                            <apex:column >
                                                                <apex:commandLink value="Delete"
                                                                    action="{!deleteRelatedList}"
                                                                    rendered="{!subSectionObj['acfComm__Related_List_Read_Only_API__c']==null || (subSectionObj['acfComm__Related_List_Read_Only_API__c']!=null && pbtObj[subSectionObj['acfComm__Related_List_Read_Only_API__c']]==false)}">
                                                                    <apex:param name="realtedListObjId"
                                                                        value="{!pbtObj['Id']}" assignTo="{!realtedListObjId}" />
                                                                </apex:commandLink>
                                                            </apex:column>
                                                            <apex:column value="{!pbtObj[subSectionObj['acfComm__Related_List_Privacy_API__c']]}"
                                                                rendered="{!subSectionObj['acfComm__Related_List_Privacy_API__c']!=null}">
                                                                <apex:facet name="header">Private</apex:facet>
                                                            </apex:column>
                                                            <apex:repeat value="{!sectionIdToFieldsMap[subSectionObj['Id']]}"
                                                                var="objField">
                                                                <apex:column value="{!pbtObj[objField.acfComm__Field_API_Name__c]}"
                                                                    rendered="{!objField.acfComm__Read_Mode__c==true}">
                                                                    <apex:facet name="header">{!objField.acfComm__Field_Name__c}</apex:facet>
                                                                </apex:column>
                                                            </apex:repeat>
                                                        </apex:pageBlockTable>
                                                        <div class="profile_fullEdit">
                                                            <div class="ps_addNew">Add New</div>
                                                            <apex:outputPanel >
                                                                <apex:outputPanel rendered="{!subSectionObj['acfComm__Related_List_Privacy_API__c']!=null}">
                                                                    <div class="ps_fields">
                                                                        <div class="ps_label">
                                                                            <apex:outputLabel value="Private" />
                                                                        </div>
                                                                        <div class="ps_data ps_edit">
                                                                            <apex:inputField value="{!sectionIdToRelatedListObjectMap[subSectionObj['Id']][subSectionObj['acfComm__Related_List_Privacy_API__c']]}" />
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:repeat value="{!sectionIdToFieldsMap[subSectionObj['Id']]}"
                                                                    var="objField">
                                                                    <apex:outputPanel rendered="{!objField.acfComm__Edit_Mode__c==true}">
                                                                        <div class="ps_fields">
                                                                            <div class="ps_label">
                                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                                            </div>
                                                                            <div class="ps_data ps_edit">
                                                                                <apex:inputField value="{!sectionIdToRelatedListObjectMap[subSectionObj['Id']][objField.acfComm__Field_API_Name__c]}" />
                                                                                <!--<apex:inputfield value="{!sectionIdToRelatedListObjectMap[pageSection['Id']][objField.acfComm__Privacy_Field_API__c]}" label="" rendered="{!objField.acfComm__Privacy_Field_API__c!=null}"/>-->
                                                                            </div>
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                </apex:repeat>
                                                                <div class="clr">&nbsp;</div>
                                                            </apex:outputPanel>
                                                            <apex:commandLink value="Add"
                                                                action="{!saveSobjectRecordToList}">
                                                                <apex:param name="pageSectionId"
                                                                    value="{!subSectionObj['Id']}"
                                                                    assignTo="{!pageSectionId}" />
                                                            </apex:commandLink>
                                                        </div>
                                                        <!--<apex:commandLink value="Create" action="{!saveSobjectRecordToListFull}" reRender="pageBody">
                                                         <apex:param name="pageSectionId" value="{'TEST'}" />
                                                    </apex:commandLink>-->
                                                    </apex:outputPanel>
                                                </apex:outputPanel>

                                            </div>
                                        </div>
                                    </apex:repeat>
                                </apex:outputPanel>

                                <!-- 2 column -->
                                <apex:outputPanel rendered="{!pageSection['acfComm__Custom_Setting_Type__c']=='2 column'}">
                                   
                                    <apex:pageblockSection >
<!--                                         <apex:outputfield value="{!mapWebContent['Two Column public Profile'].Page_Content__c}" label="" /> -->
                                    </apex:pageblockSection>
                                    
                                  <apex:outputPanel rendered="{!pageSection['acfComm__Privacy_Field_API__c']==null || (pageSection['acfComm__Privacy_Field_API__c']!=null && sectionIdToObjMap[pageSection['Id']][0][pageSection['acfComm__Privacy_Field_API__c']]==false)}">
                                        <apex:outputPanel rendered="{!!isEditMode}">
                                            <apex:outputPanel rendered="{!!isMobileMode}">
                                                <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}" var="objField">
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="1" || objField.acfComm__Column_Span__c==''}">
                                                        <div class="ps_fields colSpan1">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="ps_data">
                                                                <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                    rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                            </div>
                                                        </div>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                        <div class="ps_fields colSpan2">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="ps_data">
                                                                <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                    rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                            </div>
                                                        </div>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                        <div class="ps_fields colSpan3">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="ps_data">
                                                                <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                    rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                            </div>
                                                        </div>
                                                    </apex:outputpanel>
                                                    
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                        <div class="ps_fields colSpan4">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="ps_data">
                                                                <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                    rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                            </div>
                                                        </div>
                                                    </apex:outputpanel>
                                                </apex:repeat>
                                            </apex:outputPanel>
                                            <div class="clr">&nbsp;</div>
                                            <!--- Mobile View--->
                                            <apex:outputPanel rendered="{!isMobileMode}">
                                                <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                    var="objField">
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="1" || objField.acfComm__Column_Span__c==''}">
                                                             <div>
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <apex:outputpanel rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}">
                                                                <div class="backgroundColor2Column">
                                                                    <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"/>
                                                                </div>
                                                            </apex:outputpanel>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                            <div >
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <apex:outputpanel rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}">
                                                            <div class="backgroundColor2Column">
                                                                <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"/>
                                                            </div>
                                                            </apex:outputpanel>
                                                    </apex:outputpanel>
                                                    
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <apex:outputpanel rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}">
                                                                <div  class="backgroundColor2Column">
                                                                    <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"/>
                                                                </div>
                                                            </apex:outputpanel>
                                                    </apex:outputpanel>
                                                    
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                            <div>
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <apex:outputpanel rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}">
                                                                <div  class="backgroundColor2Column">
                                                                    <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"/>
                                                                </div>
                                                            </apex:outputpanel>
                                                    </apex:outputpanel>
                                                </apex:repeat>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                    
                                    <apex:outputPanel rendered="{!isEditMode}">
                                    <apex:outputPanel rendered="{!!isMobileMode}">
                                        <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                            var="objField">
                                            <apex:outputPanel rendered="{!!objField.Read_Only__c}">
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                    1" || objField.acfComm__Column_Span__c==''}">
                                                    <div class="ps_fields colSpan1">
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                    <div class="ps_fields colSpan2">
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                    <div class="ps_fields colSpan3">
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                    <div class="ps_fields colSpan4">
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>

                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!objField.Read_Only__c}">
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                    1" || objField.acfComm__Column_Span__c==''}">
                                                    <div class="ps_fields colSpan1">
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                    <div class="ps_fields colSpan2">
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                    <div class="ps_fields colSpan3">
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                    <div class="ps_fields colSpan4">
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                            </apex:outputPanel>
                                        </apex:repeat>
                                        </apex:outputPanel>
                                        <div class="clr">&nbsp;</div>
                                        <!--- Mobile View--->
                                        <apex:outputpanel rendered="{!isMobileMode}">
                                            <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                var="objField">
                                                <apex:outputPanel rendered="{!!objField.Read_Only__c}">
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                        1" || objField.acfComm__Column_Span__c==''}">
                                                            <div>
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="Edit2Column">
                                                                <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                            </div>
                                                            <div class="ps_private">
                                                                <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                    <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                            </div>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="Edit2Column">
                                                                <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                            </div>
                                                            <div class="ps_private">
                                                                <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                    <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                            </div>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="Edit2Column">
                                                                <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                            </div>
                                                            <div class="ps_private">
                                                                <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                    <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                            </div>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="Edit2Column">
                                                                <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                            </div>
                                                            <div class="ps_private">
                                                                <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                    <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                            </div>
                                                    </apex:outputpanel>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!objField.Read_Only__c}">
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                        1" || objField.acfComm__Column_Span__c==''}">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="backgroundColor2Column">
                                                                <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                            </div>
                                                            <div class="ps_private">
                                                                <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                    <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                            </div>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="backgroundColor2Column">
                                                                <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                            </div>
                                                            <div class="ps_private">
                                                                <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                    <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                            </div>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="backgroundColor2Column">
                                                                <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                            </div>
                                                            <div class="ps_private">
                                                                <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                    <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                            </div>
                                                    </apex:outputpanel>
                                                    <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="backgroundColor2Column">
                                                                <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                            </div>
                                                            <div class="ps_private">
                                                                <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                    <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                            </div>
                                                    </apex:outputpanel>
                                                </apex:outputPanel>
                                            </apex:repeat>
                                        </apex:outputpanel>
                                        
                                    </apex:outputPanel>
                                </apex:outputPanel>

                                <!-- preferences -->
                                <apex:outputPanel rendered="{!pageSection['acfComm__Custom_Setting_Type__c']=='preferences'}">
                                    <apex:pageblockSection >
<!--                                         <apex:outputfield value="{!mapWebContent['Two Column public Profile'].Page_Content__c}" /> -->
                                    </apex:pageblockSection>
                                    <apex:outputPanel rendered="{!pageSection['acfComm__Privacy_Field_API__c']==null || (pageSection['acfComm__Privacy_Field_API__c']!=null && sectionIdToObjMap[pageSection['Id']][0][pageSection['acfComm__Privacy_Field_API__c']]==false)}">
                                        <apex:outputPanel rendered="{!!isEditMode}">

                                            <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                var="objField">
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                    1" || objField.acfComm__Column_Span__c==''}">
                                                    <div class="ps_fieldsPref colSpan1">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                    <div class="ps_fieldsPref colSpan2">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                    <div class="ps_fieldsPref colSpan3">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                    <div class="ps_fieldsPref colSpan4">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}"
                                                                rendered="{!objField.acfComm__Privacy_Field_API__c==null || (objField.acfComm__Privacy_Field_API__c!=null && sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]==false)}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>

                                            </apex:repeat>

                                            <div class="clr">&nbsp;</div>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!isEditMode}">
                                        <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                            var="objField">
                                            <apex:outputPanel rendered="{!!objField.Read_Only__c}">
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                    1" || objField.acfComm__Column_Span__c==''}">
                                                    <div class="ps_fieldsPref colSpan1">
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                    <div class="ps_fieldsPref colSpan2">
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                    <div class="ps_fieldsPref colSpan3">
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                    <div class="ps_fieldsPref colSpan4">
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>

                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!objField.Read_Only__c}">
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="
                                                    1" || objField.acfComm__Column_Span__c==''}">
                                                    <div class="ps_fieldsPref colSpan1">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="2"}">
                                                    <div class="ps_fieldsPref colSpan2">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="3"}">
                                                    <div class="ps_fieldsPref colSpan3">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                                <apex:outputpanel rendered="{!objField.acfComm__Column_Span__c =="4"}">
                                                    <div class="ps_fieldsPref colSpan4">
                                                        <div class="ps_data">
                                                            <apex:outputField value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Field_API_Name__c]}" />
                                                        </div>
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                        </div>
                                                        <div class="ps_private">
                                                            <apex:outputPanel rendered="{!objField.acfComm__Privacy_Field_API__c!=null}">
                                                                <apex:inputfield value="{!sectionIdToObjMap[pageSection['Id']][0][objField.acfComm__Privacy_Field_API__c]}" /> Private</apex:outputPanel>
                                                        </div>
                                                    </div>
                                                </apex:outputpanel>
                                            </apex:outputPanel>
                                        </apex:repeat>
                                        <div class="clr">&nbsp;</div>
                                    </apex:outputPanel>
                                </apex:outputPanel>


                                <!-- related list compact -->
                                <apex:outputPanel rendered="{!pageSection['acfComm__Custom_Setting_Type__c']=='related list compact'}">
                                   <apex:pageblockSection >
<!--                                         <apex:outputfield value="{!mapWebContent['Related List Compact Public Profile'].Page_Content__c}" label=""/> -->
                                    </apex:pageblockSection>
                                   
                                    <!-- Output fields-->
                                    <apex:outputPanel rendered="{!!isEditMode}">
                                        <!--- Desktop view --->
                                      <apex:outputPanel rendered="{!pageSection
                                      ['acfComm__Privacy_Field_API__c']==null ||
                                                                    (pageSection['acfComm__Privacy_Field_API__c']!=null  &&
                                                                    currentContact[pageSection['acfComm__Privacy_Field_API__c']]==false)}" id="theDesktopPanel">
                                                                    
                                             <apex:pageBlockTable value="{!sectionIdToObjMap[pageSection['Id']]}" var="pbtObj">
                                                <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                    var="objField">
                                                    <apex:column value="{!pbtObj[objField.acfComm__Field_API_Name__c]}"
                                                        rendered="{!objField.acfComm__Read_Mode__c==true}">
                                                        <apex:facet name="header">{!objField.acfComm__Field_Name__c}</apex:facet>
                                                    </apex:column>
                                                </apex:repeat>
                                                <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                    var="objField">
                                                    <apex:repeat value="{!lstWrapper}" var="objWrapper">
                                                       {!objField.acfComm__Field_Name__c}
                                                        <apex:outputpanel rendered="{!If(objWrapper.FieldApiName == objField.acfComm__Field_Name__c,true,false)}">
                                                        <apex:selectlist value="{!objWrapper.SelectedValue}"
                                                            rendered="{!If(objWrapper.FieldApiName == objField.acfComm__Field_Name__c,true,false)}">
                                                            <apex:selectOptions value="{!objWrapper.lstSelectOption}" />
                                                        </apex:selectlist>
                                                         </apex:outputpanel>
                                                    </apex:repeat>
                                                </apex:repeat>
                                            </apex:pageBlockTable>  
                                        </apex:outputPanel>
                                    </apex:outputPanel>

                                       <apex:outputPanel id="compEditModeId" rendered="{!isEditMode}">                                    
                                                <apex:pageBlockTable id="pbtable1" value="{!sectionIdToObjMap[pageSection['Id']]}" var="pbtObj">
                                                      <apex:column rendered="{!pageSection['acfComm__Edit__c'] || pageSection['acfComm__Delete__c'] 
                                                                                                    ||  pageSection['acfComm__Create__c']}">
                                                <span class="profile_page_margin">
                                                <apex:commandLink value="Edit"
                                                                  action="{!editRelatedList}"
                                                                  rendered="{!pageSection['acfComm__Edit__c'] && mapEditableFields[pbtObj['Id']] == false}" immediate="true">
                                                     <apex:param name="realtedListEditObjId"
                                                            value="{!pbtObj['Id']}" assignTo="{!realtedListEditObjId}" />
                                                </apex:commandLink>
                                                </span>
                                                
                                                <span class="profile_page_margin">
                                                <apex:commandLink value="Delete"
                                                    action="{!deleteRelatedList}"
                                                    rendered="{!pageSection['acfComm__Delete__c'] && mapEditableFields[pbtObj['Id']] == false }" immediate="true">
<!--                                                     rendered="{!(pageSection['acfComm__Read_Only__c']==false) && (pageSection['acfComm__Related_List_Read_Only_API__c']==null || (pageSection['acfComm__Related_List_Read_Only_API__c']!=null && pbtObj[pageSection['acfComm__Related_List_Read_Only_API__c']]==false))}"> -->
                                                    <apex:param name="realtedListObjId" value="{!pbtObj['Id']}"
                                                        assignTo="{!realtedListObjId}" />
                                                </apex:commandLink>
                                                </span>
                                                
                                                <span class="profile_page_margin">
                                                <apex:commandLink value="Update" rerender="frmSubsection" action="{!UpdateRelatedFullRecord}"
                                                     rendered="{!mapEditableFields[pbtObj['Id']]}">
                                                <apex:param name="relFullId" value="{!pbtObj['Id']}"
                                                        assignTo="{!relatedFullId}" />
                                                </apex:commandLink>
                                                </span>

                                                 <apex:facet name="footer">
                                                    <apex:commandLink value="Add"
                                                        action="{!saveSobjectRecordToList}" styleClass="ps_add"
                                                        rendered="{!pageSection['acfComm__Create__c']==true && pageSection['acfComm__Read_Only__c']==false}" reRender="compEditModeId">
<!--                                                         rendered="{!pageSection['acfComm__Read_Only__c']==false}" reRender="compEditModeId">  -->
                                                        <apex:param name="pageSectionId"
                                                            value="{!pageSection['Id']}" assignTo="{!pageSectionId}" />
                                                    </apex:commandLink>
                                                </apex:facet>
                                            </apex:column>
                                         <!-- <apex:column value="{!pbtObj[pageSection['acfComm__Related_List_Privacy_API__c']]}"
                                                rendered="{!pageSection['acfComm__Related_List_Privacy_API__c']!=null}">
                                                <apex:facet name="header">Private</apex:facet>
                                                <apex:facet name="footer">
                                                    <apex:inputField value="{!sectionIdToRelatedListObjectMap[pageSection['Id']][pageSection['acfComm__Related_List_Privacy_API__c']]}"
                                                        rendered="{!pageSection['acfComm__Read_Only__c']==false}" />
                                                </apex:facet>
                                            </apex:column>-->
                                            <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                var="objField">   
                                                <apex:column >
                                                     
                                                   <apex:inputField value="{!pbtObj[objField.acfComm__Field_API_Name__c]}" rendered="{!mapEditableFields[pbtObj['Id']]}"/>
                                                    <apex:outputField value="{!pbtObj[objField.acfComm__Field_API_Name__c]}" rendered="{!!mapEditableFields[pbtObj['Id']]}"/>
                                                    <apex:facet name="header">{!objField.acfComm__Field_Name__c}</apex:facet>
                                                     <apex:facet name="footer">
                                                        <apex:inputField value="{!sectionIdToRelatedListObjectMap[pageSection['Id']][objField.acfComm__Field_API_Name__c]}"
                                                        rendered="{!pageSection['acfComm__Create__c'] && pageSection['acfComm__Read_Only__c']==false}"/>
<!--                                                             rendered="{!pageSection['acfComm__Read_Only__c']==false}" /> -->
                                                    </apex:facet>
                                                </apex:column>
                                                
                                            </apex:repeat>
                                        </apex:pageBlockTable>
                            </apex:outputPanel>
                        </apex:outputPanel>
                                <!-- related list full -->
                                <apex:outputPanel rendered="{!pageSection['acfComm__Custom_Setting_Type__c']=='related list full'}">
                                    <apex:pageblockSection >
<!--                                         <apex:outputfield value="{!mapWebContent['Related list Full Public Profile'].Page_Content__c}" label=""/> -->
                                    </apex:pageblockSection>
                                     <!-- Output fields-->
                                    <apex:outputPanel rendered="{!!isEditMode}">
                                        <apex:outputPanel rendered="{!pageSection['acfComm__Privacy_Field_API__c']==null ||
                                                                    (pageSection['acfComm__Privacy_Field_API__c']!=null &&
                                                                    currentContact[pageSection['acfComm__Privacy_Field_API__c']]==false)}">
                                            <apex:pageBlockTable value="{!sectionIdToObjMap[pageSection['Id']]}" var="pbtObj">
                                                <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                    var="objField">

                                                    <apex:column value="{!pbtObj[objField.acfComm__Field_API_Name__c]}"
                                                        rendered="{!objField.acfComm__Read_Mode__c==true}">
                                                        <apex:facet name="header">{!objField.acfComm__Field_Name__c}</apex:facet>
                                                    </apex:column>
                                                </apex:repeat>
                                                <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                    var="objField">
                                                    <apex:repeat value="{!lstWrapper}" var="objWrapper">
                                                       {!objField.acfComm__Field_Name__c}
                                                       <apex:outputpanel rendered="{!If(objWrapper.FieldApiName == objField.acfComm__Field_Name__c,true,false)}">
                                                        <apex:selectlist value="{!objWrapper.SelectedValue}"
                                                            rendered="{!If(objWrapper.FieldApiName == objField.acfComm__Field_Name__c,true,false)}">
                                                            <apex:selectOptions value="{!objWrapper.lstSelectOption}" />
                                                        </apex:selectlist>
                                                      </apex:outputpanel>
                                                    </apex:repeat>
                                                </apex:repeat>
                                            </apex:pageBlockTable>
                                        </apex:outputPanel>
                                        </apex:outputPanel>
                                    <!-- Input fields-->
                                    <apex:outputPanel rendered="{!isEditMode}">
                                        <!--<apex:variable var="obj3" value="{!sectionIdToObjMap[pageSection['Id']][0]}" />-->
                                        <apex:pageBlockTable id="pbtable" value="{!sectionIdToObjMap[pageSection['Id']]}" var="pbtObj">
                                            <apex:column rendered="{!pageSection['acfComm__Edit__c'] || pageSection['acfComm__Delete__c']}">
                                                <span class="profile_page_margin">
                                                <apex:commandLink value="Edit"
                                                                  action="{!editRelatedList}"
                                                                  rendered="{!pageSection['acfComm__Edit__c'] && mapEditableFields[pbtObj['Id']] == false}" immediate="true">
                                                     <apex:param name="realtedListEditObjId"
                                                            value="{!pbtObj['Id']}" assignTo="{!realtedListEditObjId}" />
                                                </apex:commandLink>
                                                </span>
                                                <span class="profile_page_margin">
                                                    <apex:commandLink value="Delete" action="{!deleteRelatedList}"
                                                        rendered="{!pageSection['acfComm__Delete__c'] && mapEditableFields[pbtObj['Id']] == false }" immediate="true">
    <!--                                                     rendered="{!(pageSection['acfComm__Read_Only__c']==false) && (pageSection['acfComm__Related_List_Read_Only_API__c']==null || (pageSection['acfComm__Related_List_Read_Only_API__c']!=null && pbtObj[pageSection['acfComm__Related_List_Read_Only_API__c']]==false))}"> -->
                                                        <apex:param name="realtedListObjId" value="{!pbtObj['Id']}"
                                                            assignTo="{!realtedListObjId}" />
                                                    </apex:commandLink>
                                                    </span>
                                                    <span class="profile_page_margin">
                                                    <apex:commandLink value="Update" rerender="frmSubsection" action="{!UpdateRelatedFullRecord}"
                                                         rendered="{!mapEditableFields[pbtObj['Id']]}">
                                                    <apex:param name="relFullId" value="{!pbtObj['Id']}"
                                                            assignTo="{!relatedFullId}" />
                                                    </apex:commandLink>
                                                </span>
                                            </apex:column>
                                            <apex:column value="{!pbtObj[pageSection['acfComm__Related_List_Privacy_API__c']]}"
                                                rendered="{!pageSection['acfComm__Related_List_Privacy_API__c']!=null}">
                                                <apex:facet name="header">Private</apex:facet>
                                            </apex:column>
                                            <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                var="objField">
                                                <apex:column rendered="{!objField.acfComm__Read_Mode__c==true}" >
                                                    <apex:inputField value="{!pbtObj[objField.acfComm__Field_API_Name__c]}" rendered="{!mapEditableFields[pbtObj['Id']]}"/>
                                                    <apex:outputField value="{!pbtObj[objField.acfComm__Field_API_Name__c]}" rendered="{!!mapEditableFields[pbtObj['Id']]}"/>
                                                    <apex:facet name="header">{!objField.acfComm__Field_Name__c}</apex:facet>
                                                </apex:column>
                                            </apex:repeat>
                                        </apex:pageBlockTable>

                                        <apex:outputPanel rendered="{!pageSection['acfComm__Read_Only__c']==false && pageSection['acfComm__Create__c']==true}" >
                                            <div class="profile_fullEdit">
                                                <div class="ps_addNew">Add New</div>
                                                <apex:outputPanel rendered="{!pageSection['acfComm__Related_List_Privacy_API__c']!=null}">
                                                    <div class="ps_fields">
                                                        <div class="ps_label">
                                                            <apex:outputLabel value="Private" />
                                                        </div>
                                                        <div class="ps_data ps_edit">
                                                            <apex:inputField value="{!sectionIdToRelatedListObjectMap[pageSection['Id']][pageSection['acfComm__Related_List_Privacy_API__c']]}" />
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:repeat value="{!sectionIdToFieldsMap[pageSection['Id']]}"
                                                    var="objField">
                                                    <apex:outputPanel rendered="{!objField.acfComm__Edit_Mode__c==true}">
                                                        <div class="ps_fields">
                                                            <div class="ps_label">
                                                                <apex:outputLabel value="{!objField.acfComm__Field_Name__c}" />
                                                            </div>
                                                            <div class="ps_data ps_edit">
                                                                <apex:inputField value="{!sectionIdToRelatedListObjectMap[pageSection['Id']][objField.acfComm__Field_API_Name__c]}" />
                                                                <!--<apex:inputfield value="{!sectionIdToRelatedListObjectMap[pageSection['Id']][objField.acfComm__Privacy_Field_API__c]}" label="" rendered="{!objField.acfComm__Privacy_Field_API__c!=null}"/>-->
                                                            </div>
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:repeat>
                                                <div class="clr">&nbsp;</div>
                                                <apex:commandLink value="Add" 
                                                    action="{!saveSobjectRecordToList}">
                                                    <apex:param name="pageSectionId"
                                                        value="{!pageSection['Id']}" assignTo="{!pageSectionId}" />
                                                </apex:commandLink>
                                            </div>
                                        </apex:outputPanel>
                                          </apex:outputPanel>
                                </apex:outputPanel>
                            </div>
                        </div>
                    </apex:pageBlock>
                </apex:repeat>
                </apex:outputPanel>

                <apex:outputPanel id="lowerButtonPanel">
                    <div class="profile_buttons">
                        <apex:outPutPanel id="editPanel1" rendered="{!showEditBtn}">
                            <apex:commandButton id="cbEdit1" value="Edit"
                                rerender="pageBody, editPanel, editPanel2, lowerButtonPanel, upperButtonPanel"
                                action="{!EditSobjectRecord}" rendered="{!!isEditMode}" immediate="true"/>
                            <apex:commandButton id="cbSave1" value="Save"
                                rerender="pageBody, editPanel, editPanel2, lowerButtonPanel, upperButtonPanel"
                                action="{!saveSobjectRecord}" rendered="{!isEditMode}" />
                            <apex:commandButton id="cbCancel1" value="Cancel"
                                reRender="pageBody, editPanel, editPanel2, lowerButtonPanel, upperButtonPanel"
                                action="{!cancel}" rendered="{!isEditMode}" />
                        </apex:outPutPanel>
                    </div>
                </apex:outputPanel>
        </div>

    </apex:form>
    <script src="https://code.jquery.com/jquery-2.1.4.js" />
    <script>
         $(document).ready(function() {
          //Sophak Added for Mobile resposive.   
        if (navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i) != null) {
         //  alert("mobile insertface");
           setMobile();
          //  mobile = true;
        } else {
          //  alert("desktop interface");
          setDesktop();
          //  mobile = false;
        }
    });
//     function updateContactRecord(relatedListId){
//         alert(relatedListId);
//         updateUserRecord(relatedListId);
//         alert("After..");
//         //return false;
//     }
    
    function fnRemoveMobileCardMask(sVFpageTitle) {
        var aMasks = top.document.getElementsByClassName('mask');

        for ( var i = 0; i < aMasks.length; i++) {
            if (aMasks[i].title == sVFpageTitle) {
                aMasks[i].style.display = 'none';
                comm_pre = window.location.toString()
                        .match(/\/[a-zA-Z]+\//);
                comm_id = window.location.toString().match(
                        /\id=[a-zA-Z0-9]+\&/);
                window.onload = function() {
                    abutton = document
                            .getElementsByClassName('profile_buttons');
                    elnew = '<input value="View More" type="button" onclick="javascript:sforce.one.navigateToURL(\''
                            + comm_pre
                            + 'apex/'
                            + sVFpageTitle
                            + '?'
                            + comm_id + '\');" />';
                    abutton[0].innerHTML = elnew;
                }

            }
        }
    }

       fnRemoveMobileCardMask("Profile_Personal_V1");
       
       
   </script>
</apex:page>